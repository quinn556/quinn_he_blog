<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Quinn He">
<meta name="dcterms.date" content="2022-11-28">

<title>Quinn He’s Website - Blog_post_4</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../index.html">
    <img src="../profile.jpg" alt="">
    <span class="navbar-title">Quinn He’s Website</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html">About</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Resume.html">Resume</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/quinn556"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.linkedin.com/in/quinnhe/">Linkedin</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#data" id="toc-data" class="nav-link active" data-scroll-target="#data">Data</a></li>
  <li><a href="#key-questions" id="toc-key-questions" class="nav-link" data-scroll-target="#key-questions">Key Questions</a></li>
  <li><a href="#notes" id="toc-notes" class="nav-link" data-scroll-target="#notes">Notes</a></li>
  <li><a href="#text-representation-with-zipfs-law" id="toc-text-representation-with-zipfs-law" class="nav-link" data-scroll-target="#text-representation-with-zipfs-law">Text Representation with Zipf’s Law</a>
  <ul class="collapse">
  <li><a href="#democrats" id="toc-democrats" class="nav-link" data-scroll-target="#democrats">Democrats</a></li>
  <li><a href="#republicans" id="toc-republicans" class="nav-link" data-scroll-target="#republicans">Republicans</a></li>
  </ul></li>
  <li><a href="#supervised-learning" id="toc-supervised-learning" class="nav-link" data-scroll-target="#supervised-learning">Supervised Learning</a></li>
  <li><a href="#structured-topic-models-rdemocrats" id="toc-structured-topic-models-rdemocrats" class="nav-link" data-scroll-target="#structured-topic-models-rdemocrats">Structured Topic Models: /r/democrats</a></li>
  <li><a href="#structured-topic-model-rrepublican" id="toc-structured-topic-model-rrepublican" class="nav-link" data-scroll-target="#structured-topic-model-rrepublican">Structured Topic Model: /r/republican</a></li>
  <li><a href="#random-forests-rdemocrats" id="toc-random-forests-rdemocrats" class="nav-link" data-scroll-target="#random-forests-rdemocrats">Random Forests: /r/democrats</a></li>
  <li><a href="#correlated-topic-model-rdemocrats" id="toc-correlated-topic-model-rdemocrats" class="nav-link" data-scroll-target="#correlated-topic-model-rdemocrats">Correlated Topic Model: /r/democrats</a></li>
  <li><a href="#correlated-topic-model-rrepublican" id="toc-correlated-topic-model-rrepublican" class="nav-link" data-scroll-target="#correlated-topic-model-rrepublican">Correlated Topic Model: /r/republican</a></li>
  <li><a href="#topic-modeling" id="toc-topic-modeling" class="nav-link" data-scroll-target="#topic-modeling">Topic Modeling</a></li>
  <li><a href="#final-notes-and-thoughts-for-blog-post-5" id="toc-final-notes-and-thoughts-for-blog-post-5" class="nav-link" data-scroll-target="#final-notes-and-thoughts-for-blog-post-5">Final Notes and Thoughts for Blog Post 5</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Blog_post_4</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
  <div class="quarto-categories">
    <div class="quarto-category">blog</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Quinn He </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 28, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RedditExtractoR)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(syuzhet)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cleanNLP)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.dictionaries)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.sentiment)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textstats)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(text2vec)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stm)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(topicmodels)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(visNetwork)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data">Data</h2>
<p>My data includes Reddit comments from /r/democrats and /r/republican that was scrapped using the RedditExtractoR package on November 8,2022, a day after the midterm elections. I named the main data frame for each subreddit “blue_comments” and “red_comments” respectively in order to make it quicker and easier to use in code. /r/democrats has 26764 comments and /r/republican has 1535 comments. I may try to repull more up to day comments for the final project, but I am unsure at this time. /r/democrats is the significantly larger subreddit with 431,799 users. /r/republican has 184,429 users, both as of Nov.&nbsp;19, 2022.</p>
</section>
<section id="key-questions" class="level2">
<h2 class="anchored" data-anchor-id="key-questions">Key Questions</h2>
<ol type="1">
<li>Which subreddit tends to have more negative speech according to multiple sentiment analysis dictionaries?</li>
<li>Generally, how do they each talk about different keywords in context?</li>
<li>What topics are most popular amongst the both subreddits?</li>
</ol>
</section>
<section id="notes" class="level2">
<h2 class="anchored" data-anchor-id="notes">Notes</h2>
<p>I may want to add sentiment columns to the main comments data sets for each subreddit.</p>
</section>
<section id="text-representation-with-zipfs-law" class="level2">
<h2 class="anchored" data-anchor-id="text-representation-with-zipfs-law">Text Representation with Zipf’s Law</h2>
<section id="democrats" class="level3">
<h3 class="anchored" data-anchor-id="democrats">Democrats</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>word_counts <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">sort</span>(<span class="fu">colSums</span>(blue_dfm),<span class="at">dec=</span>T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in h(simpleError(msg, call)): error in evaluating the argument 'x' in selecting a method for function 'colSums': object 'blue_dfm' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(word_counts) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Frequency"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in colnames(word_counts) &lt;- c("Frequency"): object 'word_counts' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>word_counts<span class="sc">$</span>Rank <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(blue_dfm))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in ncol(blue_dfm): object 'blue_dfm' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(word_counts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in head(word_counts): object 'word_counts' not found</code></pre>
</div>
</div>
<p>I really do not know what “t” could be so I must remember to remove that in future preprocessing in the final blog post.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(word_counts, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Rank, <span class="at">y =</span> Frequency)) <span class="sc">+</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Zipf's Law"</span>, <span class="at">x =</span> <span class="st">"Rank"</span>, <span class="at">y =</span> <span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in ggplot(word_counts, mapping = aes(x = Rank, y = Frequency)): object 'word_counts' not found</code></pre>
</div>
</div>
</section>
<section id="republicans" class="level3">
<h3 class="anchored" data-anchor-id="republicans">Republicans</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>word_counts2 <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">sort</span>(<span class="fu">colSums</span>(red_dfm),<span class="at">dec=</span>T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in h(simpleError(msg, call)): error in evaluating the argument 'x' in selecting a method for function 'colSums': object 'red_dfm' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(word_counts2) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Frequency"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in colnames(word_counts2) &lt;- c("Frequency"): object 'word_counts2' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>word_counts2<span class="sc">$</span>Rank <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(red_dfm))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in ncol(red_dfm): object 'red_dfm' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(word_counts2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in head(word_counts2): object 'word_counts2' not found</code></pre>
</div>
</div>
<p>In both dfms, “people” is the top used word. Again this “t” shows up as a frequent word. If I look at both wordcounts, it may help show which words are still unnecessary for my analysis. The issue with this research is the size discrepancies between the two subreddits. Based off the head of the wordcounts alone, I can see they talk about the same subject for the most part, but the context is the most important aspect. An LDA model would help me better understand what topics are discussed in the subreddits. I would expect some overlap because they are both political forums, but the question is how do they talk about these topics and what other language do they use. As stated in other research, reddit is not the best to observe to get a large portion of the population’s opinions on certain subjects, but it does offer a view of how users of similar interests talk and discuss.</p>
<p>This whole analysis is just to see how the two subreddits communicate. Do they communicate differently about the same subjects? Is there any cross talk between the two subreddits?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(word_counts2, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Rank, <span class="at">y =</span> Frequency)) <span class="sc">+</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Zipf's Law"</span>, <span class="at">x =</span> <span class="st">"Rank"</span>, <span class="at">y =</span> <span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in ggplot(word_counts2, mapping = aes(x = Rank, y = Frequency)): object 'word_counts2' not found</code></pre>
</div>
</div>
</section>
</section>
<section id="supervised-learning" class="level2">
<h2 class="anchored" data-anchor-id="supervised-learning">Supervised Learning</h2>
<p>Here I will try to implement supervised learning methods onto the republicans subreddit comments dataset because it’s smaller than the democrats one. I’ll have to create a training and test data set. Since I am only attempting this, I do not yet know if it will end up in the final project, but I want to see how it will be useful to my analysis of the two subreddits.</p>
<p>First I’ll set the seed to make sure this is reproducible and then create an id variable in the corpus.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>red_LMRD <span class="ot">&lt;-</span> <span class="fu">corpus</span>(red_loughran_mcdonald<span class="sc">$</span>docname)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in corpus(red_loughran_mcdonald$docname): object 'red_loughran_mcdonald' not found</code></pre>
</div>
</div>
<p>I cannot seem to create a corpus here. I don’t know if it is because of the particular data frame I am using or for another reason. I will have to figure this out in order to do supervised learning.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">docvars</span>(red_corpus, <span class="st">"id"</span>) <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ndoc</span>(red_corpus)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in ndoc(red_corpus): object 'red_corpus' not found</code></pre>
</div>
</div>
<p>Below I split the data into a test set and a training set. N is shown by the total number of features in the data set with the ndoc function. The “train” variable is takes a sample of N(60%) with .6 * N. The test set is just the entire data set minus the train 60%.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>red_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(red_comments<span class="sc">$</span>comment)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in corpus(red_comments$comment): object 'red_comments' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>N <span class="ot">&lt;-</span> <span class="fu">ndoc</span>(red_corpus)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in ndoc(red_corpus): object 'red_corpus' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span>N, .<span class="dv">6</span> <span class="sc">*</span> N)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in sample(1:N, 0.6 * N): object 'N' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span>N)[<span class="sc">-</span>train]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'N' not found</code></pre>
</div>
</div>
</section>
<section id="structured-topic-models-rdemocrats" class="level2">
<h2 class="anchored" data-anchor-id="structured-topic-models-rdemocrats">Structured Topic Models: /r/democrats</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>stm_blue <span class="ot">&lt;-</span> <span class="fu">stm</span>(blue_dfm,</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">K =</span> k,</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> blue_comments,</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">max.em.its =</span> <span class="dv">1000</span>,</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">seed =</span> <span class="dv">1234</span>,</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">init.type =</span> <span class="st">"Spectral"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in asSTMCorpus(documents, vocab, data): object 'blue_dfm' not found</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">labelTopics</span>(stm_blue)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in labelTopics(stm_blue): object 'stm_blue' not found</code></pre>
</div>
</div>
<p>According to the topics above and their highest probability words, a few of them do make sense together. Topic 5 for example seems to be talking about a few different things, but if I look solely at Score, then it indicats discussion related to the war in Ukraine.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(stm_blue, <span class="at">type =</span> <span class="st">"summary"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in plot(stm_blue, type = "summary"): object 'stm_blue' not found</code></pre>
</div>
</div>
</section>
<section id="structured-topic-model-rrepublican" class="level2">
<h2 class="anchored" data-anchor-id="structured-topic-model-rrepublican">Structured Topic Model: /r/republican</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>stm_red <span class="ot">&lt;-</span> <span class="fu">stm</span>(red_dfm,</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">K =</span> k,</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> red_comments,</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">max.em.its =</span> <span class="dv">1000</span>,</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">seed =</span> <span class="dv">1234</span>,</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">init.type =</span> <span class="st">"Spectral"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in asSTMCorpus(documents, vocab, data): object 'red_dfm' not found</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">labelTopics</span>(stm_red)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in labelTopics(stm_red): object 'stm_red' not found</code></pre>
</div>
</div>
<p>For the republican subreddit there is a bit of name calling going on against biden. Some of the terms I am unsure of like amputatorbot, politifact, and bidenflaction. A few I can piece together. One topic is kind of related to the conspiracy of the election being stolen from Trump.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(stm_red, <span class="at">type =</span> <span class="st">"summary"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in plot(stm_red, type = "summary"): object 'stm_red' not found</code></pre>
</div>
</div>
</section>
<section id="random-forests-rdemocrats" class="level2">
<h2 class="anchored" data-anchor-id="random-forests-rdemocrats">Random Forests: /r/democrats</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(randomForest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>randomForest 4.7-1.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Type rfNews() to see new features/changes/bug fixes.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'randomForest'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    combine</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:ggplot2':

    margin</code></pre>
</div>
</div>
<p>Here I make a smaller dfm with the blue dfm because I do not want to run something that will take too long to execute.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>blue_small_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(blue_dfm, <span class="at">min_docfreq =</span> <span class="dv">10</span>, <span class="at">min_termfreq =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in dfm_trim(blue_dfm, min_docfreq = 10, min_termfreq = 10): object 'blue_dfm' not found</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>dfmTrainSmallblue <span class="ot">&lt;-</span> <span class="fu">convert</span>(blue_small_dfm, <span class="at">to =</span> <span class="st">"matrix"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in convert(blue_small_dfm, to = "matrix"): object 'blue_small_dfm' not found</code></pre>
</div>
</div>
</section>
<section id="correlated-topic-model-rdemocrats" class="level2">
<h2 class="anchored" data-anchor-id="correlated-topic-model-rdemocrats">Correlated Topic Model: /r/democrats</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>cor_top_model_blue <span class="ot">&lt;-</span> <span class="fu">stm</span>(blue_dfm, <span class="at">K =</span> <span class="dv">5</span>, <span class="at">verbose =</span> F, <span class="at">init.type =</span> <span class="st">"Spectral"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in asSTMCorpus(documents, vocab, data): object 'blue_dfm' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(cor_top_model_blue)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in summary(cor_top_model_blue): object 'cor_top_model_blue' not found</code></pre>
</div>
</div>
<p>I’ll get names for the topic models with the next function. While the names won’t be super neat, ideal names, it will provide a quick and easy way to discern what topics are.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">labelTopics</span>(cor_top_model_blue)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in labelTopics(cor_top_model_blue): object 'cor_top_model_blue' not found</code></pre>
</div>
</div>
<p>Below are the top 5 documents in each of the 5 topics. I like this visualization because it’s helpful to check back the above function and see the full context of the comments.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">findThoughts</span>(cor_top_model_blue, <span class="at">texts =</span> blue_comments<span class="sc">$</span>comment, <span class="at">topics =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>), <span class="at">n =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in findThoughts(cor_top_model_blue, texts = blue_comments$comment, : object 'cor_top_model_blue' not found</code></pre>
</div>
</div>
</section>
<section id="correlated-topic-model-rrepublican" class="level2">
<h2 class="anchored" data-anchor-id="correlated-topic-model-rrepublican">Correlated Topic Model: /r/republican</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>cor_top_model_red <span class="ot">&lt;-</span> <span class="fu">stm</span>(red_dfm, <span class="at">K =</span> <span class="dv">5</span>, <span class="at">verbose =</span> F, <span class="at">init.type =</span> <span class="st">"Spectral"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in asSTMCorpus(documents, vocab, data): object 'red_dfm' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(cor_top_model_red)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in summary(cor_top_model_red): object 'cor_top_model_red' not found</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">labelTopics</span>(cor_top_model_red)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in labelTopics(cor_top_model_red): object 'cor_top_model_red' not found</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">findThoughts</span>(cor_top_model_red, <span class="at">texts =</span> red_comments<span class="sc">$</span>comment, <span class="at">topics =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>), <span class="at">n =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in findThoughts(cor_top_model_red, texts = red_comments$comment, : object 'cor_top_model_red' not found</code></pre>
</div>
</div>
</section>
<section id="topic-modeling" class="level2">
<h2 class="anchored" data-anchor-id="topic-modeling">Topic Modeling</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>blue_lda_tokens <span class="ot">&lt;-</span> <span class="fu">word_tokenizer</span>(blue_tokens)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in stringi::stri_split_boundaries(strings, type = "word", skip_word_none = TRUE): object 'blue_tokens' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(blue_lda_tokens)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'blue_lda_tokens' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>it_d <span class="ot">&lt;-</span> <span class="fu">itoken</span>(blue_lda_tokens, <span class="at">progressbar =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in itoken(blue_lda_tokens, progressbar = FALSE): object 'blue_lda_tokens' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>d_v <span class="ot">&lt;-</span> <span class="fu">create_vocabulary</span>(it_d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in create_vocabulary(it_d): object 'it_d' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(d_v)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'd_v' not found</code></pre>
</div>
</div>
<p>Trimming the vocab</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>d_v <span class="ot">&lt;-</span> <span class="fu">prune_vocabulary</span>(d_v, <span class="at">term_count_min =</span> <span class="dv">10</span>, <span class="at">doc_proportion_max =</span> <span class="fl">0.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in prune_vocabulary(d_v, term_count_min = 10, doc_proportion_max = 0.2): object 'd_v' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(d_v)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'd_v' not found</code></pre>
</div>
</div>
<p>Also creating the dtm</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>vectorizer_d <span class="ot">&lt;-</span> <span class="fu">vocab_vectorizer</span>(d_v)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in force(vocabulary): object 'd_v' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>blue_dtm <span class="ot">&lt;-</span> <span class="fu">create_dtm</span>(it_d, vectorizer, <span class="at">type =</span> <span class="st">"dgTMatrix"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in create_dtm(it_d, vectorizer, type = "dgTMatrix"): object 'it_d' not found</code></pre>
</div>
</div>
<p>This code below does not seem to work.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create new LDA model</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>lda_model_dems <span class="ot">&lt;-</span> LDA<span class="sc">$</span><span class="fu">new</span>(<span class="at">n_topics =</span> <span class="dv">10</span>, <span class="at">doc_topic_prior =</span> <span class="fl">0.1</span>,</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">topic_word_prior =</span> <span class="fl">0.01</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in LDA$new: object of type 'closure' is not subsettable</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># print other methods for LDA</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>lda_model_dems</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'lda_model_dems' not found</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fitting model</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>doc_topic_distr <span class="ot">&lt;-</span> </span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>  lda_model_dems<span class="sc">$</span><span class="fu">fit_transform</span>(<span class="at">x =</span> blue_dtm, <span class="at">n_iter =</span> <span class="dv">1000</span>,</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">convergence_tol =</span> <span class="fl">0.001</span>, <span class="at">n_check_convergence =</span> <span class="dv">25</span>,</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">progressbar =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'lda_model_dems' not found</code></pre>
</div>
</div>
<p>Get the top words from the model. I was trying to get the top words before I fit the model, but I guess it doesn’t work like that. I’m follow the steps of the tutorial to get an idea of how it works on other data.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>lda_model_dems<span class="sc">$</span><span class="fu">get_top_words</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">topic_number =</span> <span class="fu">c</span>(1L, 5L),</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">lambda =</span> <span class="fl">0.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'lda_model_dems' not found</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>lda_model_dems<span class="sc">$</span><span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'lda_model_dems' not found</code></pre>
</div>
</div>
<p>I need to set K to maybe 5. I don’t want too many topics. I also need to do more preprocessing in the final form of this because there are a few words I do not care for like t, thing, m, still, say, etc. When I set lamda to 0.2 to 0.4 I get a more concentrated view of the terms. I must look up more about the lower lamdas. I think having 10 topics may be too much, but I like I can see clear overlap in certain topics. The rhetoric of this democrat LDA model does not seem to hostile or even related to much of anything.</p>
<p>In future analysis, I will want to do some more preprocessing to clean up excess words. In this analysis I am finding there are a bit too many words I see as irrelevant.</p>
</section>
<section id="final-notes-and-thoughts-for-blog-post-5" class="level2">
<h2 class="anchored" data-anchor-id="final-notes-and-thoughts-for-blog-post-5">Final Notes and Thoughts for Blog Post 5</h2>
<ul>
<li>Set up individual meeting to go over project and other blog posts</li>
<li>Dictonary comparison is about finding the best dictionary for my data set. Always look at multiple dictionaries</li>
<li>Blog Post 5 should focus on a more narrative structure to discuss background and what I want to accomplish in the study. Discuss any issues I have been having or start setting up the structure of the project.</li>
<li>Render Blog Post 4 as a PDF or html so he doesnt have to run my long, intensive chunks of code.</li>
<li>Should I implement Naive Bayes classifier</li>
</ul>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="DACSS/DACSS_[Course Number]_[Course Name_[term]" data-repo-id="" data-category="Announcements" data-category-id="" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb100" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Blog_post_4"</span></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Quinn He"</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a><span class="an">desription:</span><span class="co"> "Something to describe what I did"</span></span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "11/28/2022"</span></span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-copy: true</span></span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span></span>
<span id="cb100-13"><a href="#cb100-13" aria-hidden="true" tabindex="-1"></a><span class="co">  - blog </span></span>
<span id="cb100-14"><a href="#cb100-14" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb100-15"><a href="#cb100-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-18"><a href="#cb100-18" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-19"><a href="#cb100-19" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup</span></span>
<span id="cb100-20"><a href="#cb100-20" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb100-21"><a href="#cb100-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-22"><a href="#cb100-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb100-23"><a href="#cb100-23" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RedditExtractoR)</span>
<span id="cb100-24"><a href="#cb100-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(syuzhet)</span>
<span id="cb100-25"><a href="#cb100-25" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb100-26"><a href="#cb100-26" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb100-27"><a href="#cb100-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb100-28"><a href="#cb100-28" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cleanNLP)</span>
<span id="cb100-29"><a href="#cb100-29" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb100-30"><a href="#cb100-30" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.dictionaries)</span>
<span id="cb100-31"><a href="#cb100-31" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.sentiment)</span>
<span id="cb100-32"><a href="#cb100-32" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb100-33"><a href="#cb100-33" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb100-34"><a href="#cb100-34" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textstats)</span>
<span id="cb100-35"><a href="#cb100-35" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(text2vec)</span>
<span id="cb100-36"><a href="#cb100-36" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stm)</span>
<span id="cb100-37"><a href="#cb100-37" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(topicmodels)</span>
<span id="cb100-38"><a href="#cb100-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-39"><a href="#cb100-39" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(visNetwork)</span>
<span id="cb100-40"><a href="#cb100-40" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb100-41"><a href="#cb100-41" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb100-42"><a href="#cb100-42" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb100-43"><a href="#cb100-43" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-44"><a href="#cb100-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-45"><a href="#cb100-45" aria-hidden="true" tabindex="-1"></a><span class="fu">## Data</span></span>
<span id="cb100-46"><a href="#cb100-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-47"><a href="#cb100-47" aria-hidden="true" tabindex="-1"></a>My data includes Reddit comments from /r/democrats and /r/republican that was scrapped using the RedditExtractoR package on November 8,2022, a day after the midterm elections. I named the main data frame for each subreddit "blue_comments" and "red_comments" respectively in order to make it quicker and easier to use in code. /r/democrats has 26764 comments and /r/republican has 1535 comments. I may try to repull more up to day comments for the final project, but I am unsure at this time. /r/democrats is the significantly larger subreddit with 431,799 users. /r/republican has 184,429 users, both as of Nov. 19, 2022.</span>
<span id="cb100-48"><a href="#cb100-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-49"><a href="#cb100-49" aria-hidden="true" tabindex="-1"></a><span class="fu">## Key Questions</span></span>
<span id="cb100-50"><a href="#cb100-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-51"><a href="#cb100-51" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Which subreddit tends to have more negative speech according to multiple sentiment analysis dictionaries?</span>
<span id="cb100-52"><a href="#cb100-52" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Generally, how do they each talk about different keywords in context?</span>
<span id="cb100-53"><a href="#cb100-53" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>What topics are most popular amongst the both subreddits?</span>
<span id="cb100-54"><a href="#cb100-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-55"><a href="#cb100-55" aria-hidden="true" tabindex="-1"></a><span class="fu">## Notes</span></span>
<span id="cb100-56"><a href="#cb100-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-57"><a href="#cb100-57" aria-hidden="true" tabindex="-1"></a>I may want to add sentiment columns to the main comments data sets for each subreddit.</span>
<span id="cb100-58"><a href="#cb100-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-59"><a href="#cb100-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-60"><a href="#cb100-60" aria-hidden="true" tabindex="-1"></a><span class="fu">## Text Representation with Zipf's Law</span></span>
<span id="cb100-61"><a href="#cb100-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-62"><a href="#cb100-62" aria-hidden="true" tabindex="-1"></a><span class="fu">### Democrats</span></span>
<span id="cb100-63"><a href="#cb100-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-66"><a href="#cb100-66" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-67"><a href="#cb100-67" aria-hidden="true" tabindex="-1"></a>word_counts <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">sort</span>(<span class="fu">colSums</span>(blue_dfm),<span class="at">dec=</span>T))</span>
<span id="cb100-68"><a href="#cb100-68" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(word_counts) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Frequency"</span>)</span>
<span id="cb100-69"><a href="#cb100-69" aria-hidden="true" tabindex="-1"></a>word_counts<span class="sc">$</span>Rank <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(blue_dfm))</span>
<span id="cb100-70"><a href="#cb100-70" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(word_counts)</span>
<span id="cb100-71"><a href="#cb100-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-72"><a href="#cb100-72" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-73"><a href="#cb100-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-74"><a href="#cb100-74" aria-hidden="true" tabindex="-1"></a>I really do not know what "t" could be so I must remember to remove that in future preprocessing in the final blog post.</span>
<span id="cb100-75"><a href="#cb100-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-78"><a href="#cb100-78" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-79"><a href="#cb100-79" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(word_counts, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Rank, <span class="at">y =</span> Frequency)) <span class="sc">+</span> </span>
<span id="cb100-80"><a href="#cb100-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb100-81"><a href="#cb100-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Zipf's Law"</span>, <span class="at">x =</span> <span class="st">"Rank"</span>, <span class="at">y =</span> <span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb100-82"><a href="#cb100-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb100-83"><a href="#cb100-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-84"><a href="#cb100-84" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-85"><a href="#cb100-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-86"><a href="#cb100-86" aria-hidden="true" tabindex="-1"></a><span class="fu">### Republicans</span></span>
<span id="cb100-87"><a href="#cb100-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-90"><a href="#cb100-90" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-91"><a href="#cb100-91" aria-hidden="true" tabindex="-1"></a>word_counts2 <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">sort</span>(<span class="fu">colSums</span>(red_dfm),<span class="at">dec=</span>T))</span>
<span id="cb100-92"><a href="#cb100-92" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(word_counts2) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Frequency"</span>)</span>
<span id="cb100-93"><a href="#cb100-93" aria-hidden="true" tabindex="-1"></a>word_counts2<span class="sc">$</span>Rank <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(red_dfm))</span>
<span id="cb100-94"><a href="#cb100-94" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(word_counts2)</span>
<span id="cb100-95"><a href="#cb100-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-96"><a href="#cb100-96" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-97"><a href="#cb100-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-98"><a href="#cb100-98" aria-hidden="true" tabindex="-1"></a>In both dfms, "people" is the top used word. Again this "t" shows up as a frequent word. If I look at both wordcounts, it may help show which words are still unnecessary for my analysis. The issue with this research is the size discrepancies between the two subreddits. Based off the head of the wordcounts alone, I can see they talk about the same subject for the most part, but the context is the most important aspect. An LDA model would help me better understand what topics are discussed in the subreddits. I would expect some overlap because they are both political forums, but the question is how do they talk about these topics and what other language do they use. As stated in other research, reddit is not the best to observe to get a large portion of the population's opinions on certain subjects, but it does offer a view of how users of similar interests talk and discuss.</span>
<span id="cb100-99"><a href="#cb100-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-100"><a href="#cb100-100" aria-hidden="true" tabindex="-1"></a>This whole analysis is just to see how the two subreddits communicate. Do they communicate differently about the same subjects? Is there any cross talk between the two subreddits?</span>
<span id="cb100-101"><a href="#cb100-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-104"><a href="#cb100-104" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-105"><a href="#cb100-105" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(word_counts2, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Rank, <span class="at">y =</span> Frequency)) <span class="sc">+</span> </span>
<span id="cb100-106"><a href="#cb100-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb100-107"><a href="#cb100-107" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Zipf's Law"</span>, <span class="at">x =</span> <span class="st">"Rank"</span>, <span class="at">y =</span> <span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb100-108"><a href="#cb100-108" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb100-109"><a href="#cb100-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-110"><a href="#cb100-110" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-111"><a href="#cb100-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-112"><a href="#cb100-112" aria-hidden="true" tabindex="-1"></a><span class="fu">## Supervised Learning</span></span>
<span id="cb100-113"><a href="#cb100-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-114"><a href="#cb100-114" aria-hidden="true" tabindex="-1"></a>Here I will try to implement supervised learning methods onto the republicans subreddit comments dataset because it's smaller than the democrats one. I'll have to create a training and test data set. Since I am only attempting this, I do not yet know if it will end up in the final project, but I want to see how it will be useful to my analysis of the two subreddits.</span>
<span id="cb100-115"><a href="#cb100-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-116"><a href="#cb100-116" aria-hidden="true" tabindex="-1"></a>First I'll set the seed to make sure this is reproducible and then create an id variable in the corpus.</span>
<span id="cb100-117"><a href="#cb100-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-120"><a href="#cb100-120" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-121"><a href="#cb100-121" aria-hidden="true" tabindex="-1"></a>red_LMRD <span class="ot">&lt;-</span> <span class="fu">corpus</span>(red_loughran_mcdonald<span class="sc">$</span>docname)</span>
<span id="cb100-122"><a href="#cb100-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-123"><a href="#cb100-123" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-124"><a href="#cb100-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-125"><a href="#cb100-125" aria-hidden="true" tabindex="-1"></a>I cannot seem to create a corpus here. I don't know if it is because of the particular data frame I am using or for another reason. I will have to figure this out in order to do supervised learning.</span>
<span id="cb100-126"><a href="#cb100-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-129"><a href="#cb100-129" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-130"><a href="#cb100-130" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb100-131"><a href="#cb100-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-132"><a href="#cb100-132" aria-hidden="true" tabindex="-1"></a><span class="fu">docvars</span>(red_corpus, <span class="st">"id"</span>) <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ndoc</span>(red_corpus)</span>
<span id="cb100-133"><a href="#cb100-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-134"><a href="#cb100-134" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-135"><a href="#cb100-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-136"><a href="#cb100-136" aria-hidden="true" tabindex="-1"></a>Below I split the data into a test set and a training set. N is shown by the total number of features in the data set with the ndoc function. The "train" variable is takes a sample of N(60%) with .6 <span class="sc">\*</span> N. The test set is just the entire data set minus the train 60%.</span>
<span id="cb100-137"><a href="#cb100-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-140"><a href="#cb100-140" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-141"><a href="#cb100-141" aria-hidden="true" tabindex="-1"></a>red_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(red_comments<span class="sc">$</span>comment)</span>
<span id="cb100-142"><a href="#cb100-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-143"><a href="#cb100-143" aria-hidden="true" tabindex="-1"></a>N <span class="ot">&lt;-</span> <span class="fu">ndoc</span>(red_corpus)</span>
<span id="cb100-144"><a href="#cb100-144" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span>N, .<span class="dv">6</span> <span class="sc">*</span> N)</span>
<span id="cb100-145"><a href="#cb100-145" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span>N)[<span class="sc">-</span>train]</span>
<span id="cb100-146"><a href="#cb100-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-147"><a href="#cb100-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-148"><a href="#cb100-148" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-149"><a href="#cb100-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-150"><a href="#cb100-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-151"><a href="#cb100-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-152"><a href="#cb100-152" aria-hidden="true" tabindex="-1"></a><span class="fu">## Structured Topic Models: /r/democrats</span></span>
<span id="cb100-153"><a href="#cb100-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-156"><a href="#cb100-156" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-157"><a href="#cb100-157" aria-hidden="true" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb100-158"><a href="#cb100-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-159"><a href="#cb100-159" aria-hidden="true" tabindex="-1"></a>stm_blue <span class="ot">&lt;-</span> <span class="fu">stm</span>(blue_dfm,</span>
<span id="cb100-160"><a href="#cb100-160" aria-hidden="true" tabindex="-1"></a>               <span class="at">K =</span> k,</span>
<span id="cb100-161"><a href="#cb100-161" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> blue_comments,</span>
<span id="cb100-162"><a href="#cb100-162" aria-hidden="true" tabindex="-1"></a>               <span class="at">max.em.its =</span> <span class="dv">1000</span>,</span>
<span id="cb100-163"><a href="#cb100-163" aria-hidden="true" tabindex="-1"></a>               <span class="at">seed =</span> <span class="dv">1234</span>,</span>
<span id="cb100-164"><a href="#cb100-164" aria-hidden="true" tabindex="-1"></a>               <span class="at">init.type =</span> <span class="st">"Spectral"</span>)</span>
<span id="cb100-165"><a href="#cb100-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-166"><a href="#cb100-166" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-167"><a href="#cb100-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-170"><a href="#cb100-170" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-171"><a href="#cb100-171" aria-hidden="true" tabindex="-1"></a><span class="fu">labelTopics</span>(stm_blue)</span>
<span id="cb100-172"><a href="#cb100-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-173"><a href="#cb100-173" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-174"><a href="#cb100-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-175"><a href="#cb100-175" aria-hidden="true" tabindex="-1"></a>According to the topics above and their highest probability words, a few of them do make sense together. Topic 5 for example seems to be talking about a few different things, but if I look solely at Score, then it indicats discussion related to the war in Ukraine.</span>
<span id="cb100-176"><a href="#cb100-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-179"><a href="#cb100-179" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-180"><a href="#cb100-180" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(stm_blue, <span class="at">type =</span> <span class="st">"summary"</span>)</span>
<span id="cb100-181"><a href="#cb100-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-182"><a href="#cb100-182" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-183"><a href="#cb100-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-184"><a href="#cb100-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-185"><a href="#cb100-185" aria-hidden="true" tabindex="-1"></a><span class="fu">## Structured Topic Model: /r/republican</span></span>
<span id="cb100-186"><a href="#cb100-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-189"><a href="#cb100-189" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-190"><a href="#cb100-190" aria-hidden="true" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb100-191"><a href="#cb100-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-192"><a href="#cb100-192" aria-hidden="true" tabindex="-1"></a>stm_red <span class="ot">&lt;-</span> <span class="fu">stm</span>(red_dfm,</span>
<span id="cb100-193"><a href="#cb100-193" aria-hidden="true" tabindex="-1"></a>               <span class="at">K =</span> k,</span>
<span id="cb100-194"><a href="#cb100-194" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> red_comments,</span>
<span id="cb100-195"><a href="#cb100-195" aria-hidden="true" tabindex="-1"></a>               <span class="at">max.em.its =</span> <span class="dv">1000</span>,</span>
<span id="cb100-196"><a href="#cb100-196" aria-hidden="true" tabindex="-1"></a>               <span class="at">seed =</span> <span class="dv">1234</span>,</span>
<span id="cb100-197"><a href="#cb100-197" aria-hidden="true" tabindex="-1"></a>               <span class="at">init.type =</span> <span class="st">"Spectral"</span>)</span>
<span id="cb100-198"><a href="#cb100-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-199"><a href="#cb100-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-200"><a href="#cb100-200" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-201"><a href="#cb100-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-204"><a href="#cb100-204" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-205"><a href="#cb100-205" aria-hidden="true" tabindex="-1"></a><span class="fu">labelTopics</span>(stm_red)</span>
<span id="cb100-206"><a href="#cb100-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-207"><a href="#cb100-207" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-208"><a href="#cb100-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-209"><a href="#cb100-209" aria-hidden="true" tabindex="-1"></a>For the republican subreddit there is a bit of name calling going on against biden. Some of the terms I am unsure of like amputatorbot, politifact, and bidenflaction. A few I can piece together. One topic is kind of related to the conspiracy of the election being stolen from Trump.</span>
<span id="cb100-210"><a href="#cb100-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-213"><a href="#cb100-213" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-214"><a href="#cb100-214" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(stm_red, <span class="at">type =</span> <span class="st">"summary"</span>)</span>
<span id="cb100-215"><a href="#cb100-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-216"><a href="#cb100-216" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-217"><a href="#cb100-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-218"><a href="#cb100-218" aria-hidden="true" tabindex="-1"></a><span class="fu">## Random Forests: /r/democrats</span></span>
<span id="cb100-219"><a href="#cb100-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-222"><a href="#cb100-222" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-223"><a href="#cb100-223" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(randomForest)</span>
<span id="cb100-224"><a href="#cb100-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-225"><a href="#cb100-225" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-226"><a href="#cb100-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-227"><a href="#cb100-227" aria-hidden="true" tabindex="-1"></a>Here I make a smaller dfm with the blue dfm because I do not want to run something that will take too long to execute.</span>
<span id="cb100-228"><a href="#cb100-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-231"><a href="#cb100-231" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-232"><a href="#cb100-232" aria-hidden="true" tabindex="-1"></a>blue_small_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(blue_dfm, <span class="at">min_docfreq =</span> <span class="dv">10</span>, <span class="at">min_termfreq =</span> <span class="dv">10</span>)</span>
<span id="cb100-233"><a href="#cb100-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-234"><a href="#cb100-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-235"><a href="#cb100-235" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-236"><a href="#cb100-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-239"><a href="#cb100-239" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-240"><a href="#cb100-240" aria-hidden="true" tabindex="-1"></a>dfmTrainSmallblue <span class="ot">&lt;-</span> <span class="fu">convert</span>(blue_small_dfm, <span class="at">to =</span> <span class="st">"matrix"</span>)</span>
<span id="cb100-241"><a href="#cb100-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-242"><a href="#cb100-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-243"><a href="#cb100-243" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-244"><a href="#cb100-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-245"><a href="#cb100-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-246"><a href="#cb100-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-247"><a href="#cb100-247" aria-hidden="true" tabindex="-1"></a><span class="fu">## Correlated Topic Model: /r/democrats</span></span>
<span id="cb100-248"><a href="#cb100-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-251"><a href="#cb100-251" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-252"><a href="#cb100-252" aria-hidden="true" tabindex="-1"></a>cor_top_model_blue <span class="ot">&lt;-</span> <span class="fu">stm</span>(blue_dfm, <span class="at">K =</span> <span class="dv">5</span>, <span class="at">verbose =</span> F, <span class="at">init.type =</span> <span class="st">"Spectral"</span>)</span>
<span id="cb100-253"><a href="#cb100-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-254"><a href="#cb100-254" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(cor_top_model_blue)</span>
<span id="cb100-255"><a href="#cb100-255" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-256"><a href="#cb100-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-257"><a href="#cb100-257" aria-hidden="true" tabindex="-1"></a>I'll get names for the topic models with the next function. While the names won't be super neat, ideal names, it will provide a quick and easy way to discern what topics are.</span>
<span id="cb100-258"><a href="#cb100-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-261"><a href="#cb100-261" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-262"><a href="#cb100-262" aria-hidden="true" tabindex="-1"></a><span class="fu">labelTopics</span>(cor_top_model_blue)</span>
<span id="cb100-263"><a href="#cb100-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-264"><a href="#cb100-264" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-265"><a href="#cb100-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-266"><a href="#cb100-266" aria-hidden="true" tabindex="-1"></a>Below are the top 5 documents in each of the 5 topics. I like this visualization because it's helpful to check back the above function and see the full context of the comments.</span>
<span id="cb100-267"><a href="#cb100-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-270"><a href="#cb100-270" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-271"><a href="#cb100-271" aria-hidden="true" tabindex="-1"></a><span class="fu">findThoughts</span>(cor_top_model_blue, <span class="at">texts =</span> blue_comments<span class="sc">$</span>comment, <span class="at">topics =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>), <span class="at">n =</span> <span class="dv">1</span>)</span>
<span id="cb100-272"><a href="#cb100-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-273"><a href="#cb100-273" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-274"><a href="#cb100-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-275"><a href="#cb100-275" aria-hidden="true" tabindex="-1"></a><span class="fu">## Correlated Topic Model: /r/republican</span></span>
<span id="cb100-276"><a href="#cb100-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-279"><a href="#cb100-279" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-280"><a href="#cb100-280" aria-hidden="true" tabindex="-1"></a>cor_top_model_red <span class="ot">&lt;-</span> <span class="fu">stm</span>(red_dfm, <span class="at">K =</span> <span class="dv">5</span>, <span class="at">verbose =</span> F, <span class="at">init.type =</span> <span class="st">"Spectral"</span>)</span>
<span id="cb100-281"><a href="#cb100-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-282"><a href="#cb100-282" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(cor_top_model_red)</span>
<span id="cb100-283"><a href="#cb100-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-284"><a href="#cb100-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-285"><a href="#cb100-285" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-286"><a href="#cb100-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-289"><a href="#cb100-289" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-290"><a href="#cb100-290" aria-hidden="true" tabindex="-1"></a><span class="fu">labelTopics</span>(cor_top_model_red)</span>
<span id="cb100-291"><a href="#cb100-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-292"><a href="#cb100-292" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-293"><a href="#cb100-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-296"><a href="#cb100-296" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-297"><a href="#cb100-297" aria-hidden="true" tabindex="-1"></a><span class="fu">findThoughts</span>(cor_top_model_red, <span class="at">texts =</span> red_comments<span class="sc">$</span>comment, <span class="at">topics =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>), <span class="at">n =</span> <span class="dv">1</span>)</span>
<span id="cb100-298"><a href="#cb100-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-299"><a href="#cb100-299" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-300"><a href="#cb100-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-301"><a href="#cb100-301" aria-hidden="true" tabindex="-1"></a><span class="fu">## Topic Modeling</span></span>
<span id="cb100-302"><a href="#cb100-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-305"><a href="#cb100-305" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-306"><a href="#cb100-306" aria-hidden="true" tabindex="-1"></a>blue_lda_tokens <span class="ot">&lt;-</span> <span class="fu">word_tokenizer</span>(blue_tokens)</span>
<span id="cb100-307"><a href="#cb100-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-308"><a href="#cb100-308" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(blue_lda_tokens)</span>
<span id="cb100-309"><a href="#cb100-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-310"><a href="#cb100-310" aria-hidden="true" tabindex="-1"></a>it_d <span class="ot">&lt;-</span> <span class="fu">itoken</span>(blue_lda_tokens, <span class="at">progressbar =</span> <span class="cn">FALSE</span>)</span>
<span id="cb100-311"><a href="#cb100-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-312"><a href="#cb100-312" aria-hidden="true" tabindex="-1"></a>d_v <span class="ot">&lt;-</span> <span class="fu">create_vocabulary</span>(it_d)</span>
<span id="cb100-313"><a href="#cb100-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-314"><a href="#cb100-314" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(d_v)</span>
<span id="cb100-315"><a href="#cb100-315" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-316"><a href="#cb100-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-317"><a href="#cb100-317" aria-hidden="true" tabindex="-1"></a>Trimming the vocab</span>
<span id="cb100-318"><a href="#cb100-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-321"><a href="#cb100-321" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-322"><a href="#cb100-322" aria-hidden="true" tabindex="-1"></a>d_v <span class="ot">&lt;-</span> <span class="fu">prune_vocabulary</span>(d_v, <span class="at">term_count_min =</span> <span class="dv">10</span>, <span class="at">doc_proportion_max =</span> <span class="fl">0.2</span>)</span>
<span id="cb100-323"><a href="#cb100-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-324"><a href="#cb100-324" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(d_v)</span>
<span id="cb100-325"><a href="#cb100-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-326"><a href="#cb100-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-327"><a href="#cb100-327" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-328"><a href="#cb100-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-329"><a href="#cb100-329" aria-hidden="true" tabindex="-1"></a>Also creating the dtm</span>
<span id="cb100-330"><a href="#cb100-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-333"><a href="#cb100-333" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-334"><a href="#cb100-334" aria-hidden="true" tabindex="-1"></a>vectorizer_d <span class="ot">&lt;-</span> <span class="fu">vocab_vectorizer</span>(d_v)</span>
<span id="cb100-335"><a href="#cb100-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-336"><a href="#cb100-336" aria-hidden="true" tabindex="-1"></a>blue_dtm <span class="ot">&lt;-</span> <span class="fu">create_dtm</span>(it_d, vectorizer, <span class="at">type =</span> <span class="st">"dgTMatrix"</span>)</span>
<span id="cb100-337"><a href="#cb100-337" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-338"><a href="#cb100-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-339"><a href="#cb100-339" aria-hidden="true" tabindex="-1"></a>This code below does not seem to work. </span>
<span id="cb100-342"><a href="#cb100-342" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-343"><a href="#cb100-343" aria-hidden="true" tabindex="-1"></a><span class="co"># create new LDA model</span></span>
<span id="cb100-344"><a href="#cb100-344" aria-hidden="true" tabindex="-1"></a>lda_model_dems <span class="ot">&lt;-</span> LDA<span class="sc">$</span><span class="fu">new</span>(<span class="at">n_topics =</span> <span class="dv">10</span>, <span class="at">doc_topic_prior =</span> <span class="fl">0.1</span>,</span>
<span id="cb100-345"><a href="#cb100-345" aria-hidden="true" tabindex="-1"></a>                     <span class="at">topic_word_prior =</span> <span class="fl">0.01</span>)</span>
<span id="cb100-346"><a href="#cb100-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-347"><a href="#cb100-347" aria-hidden="true" tabindex="-1"></a><span class="co"># print other methods for LDA</span></span>
<span id="cb100-348"><a href="#cb100-348" aria-hidden="true" tabindex="-1"></a>lda_model_dems</span>
<span id="cb100-349"><a href="#cb100-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-350"><a href="#cb100-350" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-351"><a href="#cb100-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-354"><a href="#cb100-354" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-355"><a href="#cb100-355" aria-hidden="true" tabindex="-1"></a><span class="co"># fitting model</span></span>
<span id="cb100-356"><a href="#cb100-356" aria-hidden="true" tabindex="-1"></a>doc_topic_distr <span class="ot">&lt;-</span> </span>
<span id="cb100-357"><a href="#cb100-357" aria-hidden="true" tabindex="-1"></a>  lda_model_dems<span class="sc">$</span><span class="fu">fit_transform</span>(<span class="at">x =</span> blue_dtm, <span class="at">n_iter =</span> <span class="dv">1000</span>,</span>
<span id="cb100-358"><a href="#cb100-358" aria-hidden="true" tabindex="-1"></a>                          <span class="at">convergence_tol =</span> <span class="fl">0.001</span>, <span class="at">n_check_convergence =</span> <span class="dv">25</span>,</span>
<span id="cb100-359"><a href="#cb100-359" aria-hidden="true" tabindex="-1"></a>                          <span class="at">progressbar =</span> <span class="cn">FALSE</span>)</span>
<span id="cb100-360"><a href="#cb100-360" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-361"><a href="#cb100-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-362"><a href="#cb100-362" aria-hidden="true" tabindex="-1"></a>Get the top words from the model. I was trying to get the top words before I fit the model, but I guess it doesn't work like that. I'm follow the steps of the tutorial to get an idea of how it works on other data.</span>
<span id="cb100-363"><a href="#cb100-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-366"><a href="#cb100-366" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-367"><a href="#cb100-367" aria-hidden="true" tabindex="-1"></a>lda_model_dems<span class="sc">$</span><span class="fu">get_top_words</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">topic_number =</span> <span class="fu">c</span>(1L, 5L),</span>
<span id="cb100-368"><a href="#cb100-368" aria-hidden="true" tabindex="-1"></a>                        <span class="at">lambda =</span> <span class="fl">0.2</span>)</span>
<span id="cb100-369"><a href="#cb100-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-370"><a href="#cb100-370" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-371"><a href="#cb100-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-374"><a href="#cb100-374" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb100-375"><a href="#cb100-375" aria-hidden="true" tabindex="-1"></a>lda_model_dems<span class="sc">$</span><span class="fu">plot</span>()</span>
<span id="cb100-376"><a href="#cb100-376" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb100-377"><a href="#cb100-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-378"><a href="#cb100-378" aria-hidden="true" tabindex="-1"></a>I need to set K to maybe 5. I don't want too many topics. I also need to do more preprocessing in the final form of this because there are a few words I do not care for like t, thing, m, still, say, etc. When I set lamda to 0.2 to 0.4 I get a more concentrated view of the terms. I must look up more about the lower lamdas. I think having 10 topics may be too much, but I like I can see clear overlap in certain topics. The rhetoric of this democrat LDA model does not seem to hostile or even related to much of anything. </span>
<span id="cb100-379"><a href="#cb100-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-380"><a href="#cb100-380" aria-hidden="true" tabindex="-1"></a>In future analysis, I will want to do some more preprocessing to clean up excess words. In this analysis I am finding there are a bit too many words I see as irrelevant.</span>
<span id="cb100-381"><a href="#cb100-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-382"><a href="#cb100-382" aria-hidden="true" tabindex="-1"></a><span class="fu">## Final Notes and Thoughts for Blog Post 5</span></span>
<span id="cb100-383"><a href="#cb100-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-384"><a href="#cb100-384" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Set up individual meeting to go over project and other blog posts</span>
<span id="cb100-385"><a href="#cb100-385" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Dictonary comparison is about finding the best dictionary for my data set. Always look at multiple dictionaries</span>
<span id="cb100-386"><a href="#cb100-386" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Blog Post 5 should focus on a more narrative structure to discuss background and what I want to accomplish in the study. Discuss any issues I have been having or start setting up the structure of the project.</span>
<span id="cb100-387"><a href="#cb100-387" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Render Blog Post 4 as a PDF or html so he doesnt have to run my long, intensive chunks of code.</span>
<span id="cb100-388"><a href="#cb100-388" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Should I implement Naive Bayes classifier</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>